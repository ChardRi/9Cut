<!Doctype html>
<head>
	<meta charset="utf-8"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script src="js/filereader.js"></script>
	
	<style type="text/css">
		#photo{
			width:100px;
			height:100px;
			background-color: tomato;
		}
		#photo:after{
		    content: '拖拽一个图片到这里';
		    top: 150px;
		    z-index: 1;
		    color: #ccc;
		    display: block;
		    font-size: 20px;
		    position: absolute;
		    width: 100%;
		    letter-spacing: 1px;
		}
	</style>
</head>
<body>
	<div id="photo"></div>
	<img></img>
	<input type="file" id="file_demo"/> 
	<script type="text/javascript">
		// var input = document.getElementById("file_demo");
		// var result = document.getElementById("photo");
	 //    input.addEventListener( 'change',readFile,false );
	 //    function readFile(){
  //   		var file = this.files[0];
	 //        if(!/image\/\w+/.test(file.type)){
	 //                alert("请确保文件为图像类型");
	 //                return false;
	 //        }
	 //        var reader = new FileReader();
	 //        reader.readAsDataURL(file);
	 //        reader.onload = function(e){
	 //                result.innerHTML = '<img src="'+this.result+'" alt=""/>'
	 //                //document.getElementById("photo").append(result);
	 //        }
		// }
		var opts = {
		    dragClass: "drag",
		    accept: false,
		    readAsMap: {
		        'image/*': 'DataURL',
		        'text/*' : 'Text'
		    },
		    readAsDefault: 'BinaryString',
		    on: {
		        beforestart: function(e, file) {
		        	// return false if you want to skip this file

		    	},
		        loadstart: function(e, file) {
		        	// Native ProgressEvent

		    	},
		        progress: function(e, file) {
		        	// Native ProgressEvent

		    	},
		        load: function(e, file) {
				    //向拖拽容器添加一个图片元素
				    var img = $('<img>').appendTo(photo);
				    //图片读取成功后触发，这样才能找到图片原始宽度和高度
				    img.load(function(){
				    });
				    // 设置图片的src，直接读取二进制图片数据
				    // 触发img的load事件
				    img.attr('src', e.target.result);
		    	},
		        error: function(e, file) {
		        	// Native ProgressEvent

		    	},
		        loadend: function(e, file) {
		        	// Native ProgressEvent

		    	},
		        abort: function(e, file) {
		        	// Native ProgressEvent

		    	},
		        skip: function(e, file) {
		        	// Called when a file is skipped.  This happens when:
		        	// 	1) A file doesn't match the accept option
		        	// 	2) false is returned in the beforestart callback
		    	},
		        groupstart: function(group) {

		    	},
		        groupend: function(group) {

		    	}
		    }
		};

		$("#photo").fileReaderJS(opts);
		$("body").fileClipboard(opts);
		// var photo = $('#photo');
		// //调用FileReader插件
		// photo.fileReaderJS({
		//     //监听拖拽的各个事件
		//     on:{		 
		//         beforestart: function(e, file) {
		//             //只接受图片
		//             return /^image\/\w+/.test(file.type);
		//         },
		//         load: function(e, file) {
		// 		    //向拖拽容器添加一个图片元素
		// 		    var img = $('<img>').appendTo(photo);
		// 		    //图片读取成功后触发，这样才能找到图片原始宽度和高度
		// 		    img.load(function(){
		// 		        alert(1)
		// 		    });
		// 		    // 设置图片的src，直接读取二进制图片数据
		// 		    // 触发img的load事件
		// 		    img.attr('src', e.target.result);
		// 		}
		//     }
		// })
	</script>
</body>